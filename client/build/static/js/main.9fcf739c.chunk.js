(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(17),o=n.n(s),i=(n(24),n(4)),r=(n(25),n(26),n(2)),l=n(5),u=n(0);var j=function(){var e=Object(c.useContext)(y),t=e.state,n=e.dispatch,a=Object(r.f)();return Object(u.jsxs)("div",{className:"navbar",children:[Object(u.jsx)("div",{className:"navbar__left",children:Object(u.jsx)(l.b,{to:t?"/":"/signin",children:Object(u.jsx)("img",{className:"navbar__image",to:"/",src:"https://i.ibb.co/YdR0QvM/Png-Item-1056823.png",alt:""})})}),Object(u.jsx)("div",{className:"navbar__right",children:t?[Object(u.jsx)(l.b,{to:"/newpost",children:"New Post"}),Object(u.jsx)(l.b,{to:"/profile",children:"Profile"}),Object(u.jsx)("button",{onClick:function(){localStorage.clear(),n({type:"CLEAR"}),a.push("/signin")},children:"Log out"})]:[Object(u.jsx)(l.b,{to:"/signin",children:"Signin"}),Object(u.jsx)(l.b,{to:"/signup",children:"Signup"})]})]})};n(33);var p=function(e){var t=e.postID,n=e.imageSrc,a=e.title,s=e.postedBy,o=Object(c.useContext)(y),i=o.state;return o.dispatch,Object(u.jsxs)("div",{className:"post",children:[Object(u.jsx)("img",{className:"post__image",src:n,alt:n}),Object(u.jsxs)("div",{className:"post__bottom",children:[Object(u.jsx)("h4",{className:"post__title",children:a}),Object(u.jsxs)("div",{className:"post__icons",children:[Object(u.jsx)("button",{children:"^"}),Object(u.jsx)("button",{children:"Comment"}),i._id==s&&Object(u.jsx)("button",{onClick:function(){fetch("/deletepost/".concat(t),{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("jwt_token")}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},children:"Delete"})]})]})]})};n(34);var b=function(e){var t=e.postID,n=e.imageSrc,c=e.title,a=e.postedBy;return Object(u.jsx)("div",{className:"posts",children:Object(u.jsx)(p,{imageSrc:n,title:c,postID:t,postedBy:a})})};var d=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){fetch("/allposts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt_token")}}).then((function(e){return e.json()})).then((function(e){console.log(e),a(e)}))}),[]),Object(u.jsx)("div",{className:"home",children:n.map((function(e){return Object(u.jsx)(b,{imageSrc:e.image_url,title:e.title,postID:e._id,postedBy:e.postedBy._id},e._id)}))})};n(35);var h=function(){var e=Object(c.useContext)(y),t=(e.state,e.dispatch),n=Object(r.f)(),a=Object(c.useState)(""),s=Object(i.a)(a,2),o=s[0],j=s[1],p=Object(c.useState)(""),b=Object(i.a)(p,2),d=b[0],h=b[1];return Object(u.jsx)("div",{className:"signin",children:Object(u.jsxs)("div",{className:"signin__card",children:[Object(u.jsx)("img",{className:"signin__image",to:"/",src:"https://i.ibb.co/YdR0QvM/Png-Item-1056823.png",alt:""}),Object(u.jsx)("input",{type:"text",placeholder:"email",value:o,onChange:function(e){return j(e.target.value)}}),Object(u.jsx)("input",{type:"password",placeholder:"password",value:d,onChange:function(e){return h(e.target.value)}}),Object(u.jsx)("button",{type:"submit",onClick:function(){fetch("/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:d,email:o})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?console.log(e.error):(localStorage.setItem("jwt_token",e.token),localStorage.setItem("user_data",JSON.stringify(e.userData)),t({type:"USER",payload:e.userData}),n.push("/"))})).catch((function(e){console.log(e)}))},children:"Signin"}),Object(u.jsx)(l.b,{to:"/signup",children:Object(u.jsx)("h4",{children:"Don't have an account?"})})]})})};n(36);var O=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useContext)(y),o=s.state;return s.dispatch,Object(c.useEffect)((function(){fetch("/myposts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt_token")}}).then((function(e){return e.json()})).then((function(e){a(e)}))}),[]),Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsxs)("div",{className:"profile__header",children:[Object(u.jsx)("img",{className:"profile__image",src:"https://st4.depositphotos.com/5575514/23597/v/600/depositphotos_235978748-stock-illustration-neutral-profile-picture.jpg",alt:"person"}),Object(u.jsx)("h1",{className:"profile__name",children:o?o.name:"Loading..."})]}),n.map((function(e){return Object(u.jsx)(b,{imageSrc:e.image_url,title:e.title,postID:e._id,postedBy:e.postedBy._id},e._id)}))]})};n(37);var g=function(){var e=Object(r.f)(),t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(""),j=Object(i.a)(o,2),p=j[0],b=j[1],d=Object(c.useState)(""),h=Object(i.a)(d,2),O=h[0],g=h[1];return Object(u.jsx)("div",{className:"signup",children:Object(u.jsxs)("div",{className:"signup__card",children:[Object(u.jsx)("img",{className:"signup__image",to:"/",src:"https://i.ibb.co/YdR0QvM/Png-Item-1056823.png",alt:""}),Object(u.jsx)("input",{type:"text",placeholder:"name",value:a,onChange:function(e){return s(e.target.value)}}),Object(u.jsx)("input",{type:"text",placeholder:"email",value:p,onChange:function(e){return b(e.target.value)}}),Object(u.jsx)("input",{type:"password",placeholder:"password",value:O,onChange:function(e){return g(e.target.value)}}),Object(u.jsx)("button",{type:"submit",onClick:function(){fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,password:O,email:p})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?console.log(t.error):e.push("/signin")})).catch((function(e){console.log(e)}))},children:"Signup"}),Object(u.jsx)(l.b,{to:"/signin",children:Object(u.jsx)("h4",{children:"Already have an account?"})})]})})},f=n(15),m=n.n(f),x=n(19);n(39);var v=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),o=Object(i.a)(s,2),l=o[0],j=o[1],p=Object(c.useState)(""),b=Object(i.a)(p,2),d=b[0],h=b[1],O=Object(c.useState)(""),g=Object(i.a)(O,2),f=g[0],v=g[1];Object(c.useEffect)((function(){f&&fetch("/createpost",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt_token")},body:JSON.stringify({title:n,body:l,image_url:f})}).then((function(e){return e.json()})).then((function(e){e.error?console.log(e.error):_.push("/profile")})).catch((function(e){console.log(e)}))}),[f]);var _=Object(r.f)(),y=function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new FormData).append("file",d),console.log(d.name),t.append("upload_preset","imgur_"),t.append("cloud_name","dhirajnivalkar"),fetch("\thttps://api.cloudinary.com/v1_1/dhirajnivalkar/image/upload",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){v(e.secure_url)})).catch((function(e){return console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"createPost",children:Object(u.jsxs)("div",{className:"createPost__card",children:[Object(u.jsx)("input",{type:"text",placeholder:"title",value:n,onChange:function(e){return a(e.target.value)}}),Object(u.jsx)("input",{type:"text",placeholder:"body",value:l,onChange:function(e){return j(e.target.value)}}),Object(u.jsx)("input",{type:"file",onChange:function(e){return h(e.target.files[0])}}),Object(u.jsx)("button",{type:"submit",onClick:y,children:"Post"})]})})},_=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:e},y=Object(c.createContext)(),S=function(){var e=Object(r.f)(),t=Object(c.useContext)(y),n=(t.state,t.dispatch);return Object(c.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user_data"));t?n({type:"USER",payload:t}):e.push("/signin")}),[]),Object(u.jsxs)(r.c,{children:[Object(u.jsx)(r.a,{exact:!0,path:"/",children:Object(u.jsx)(d,{})}),Object(u.jsx)(r.a,{path:"/signin",children:Object(u.jsx)(h,{})}),Object(u.jsx)(r.a,{path:"/signup",children:Object(u.jsx)(g,{})}),Object(u.jsx)(r.a,{path:"/profile",children:Object(u.jsx)(O,{})}),Object(u.jsx)(r.a,{path:"/newpost",children:Object(u.jsx)(v,{})})]})};var N=function(){var e=Object(c.useReducer)(_,null),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(y.Provider,{value:{state:n,dispatch:a},children:Object(u.jsxs)(l.a,{children:[Object(u.jsx)(j,{}),Object(u.jsx)(S,{})]})})})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),s(e),o(e)}))};o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(N,{})}),document.getElementById("root")),C()}},[[40,1,2]]]);
//# sourceMappingURL=main.9fcf739c.chunk.js.map